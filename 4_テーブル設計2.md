# 状態を取り出す設計パターン
1. ステータスカラムのUPDATE
2. 親イベントの全カラムUPDATE
3. 最新状態テーブルのDELETE&INSERT

## 1. ステータスカラムのUPDATE
ロングタームイベント

予約
- 予約ID
- 予約ステータス

予約イベント
- 予約イベントID
- 予約ID

予約申込
- 予約イベントID
- 予約ID
- 会員ID
- 書誌ID
- 予約開始日

予約キャンセル
- 予約イベントID
- 予約ID

予約取置き
- 予約イベントID
- 取置きID
- 取置き開始日
- 取置き期限

```sql
-- 予約中
SELECT * FROM 予約 WHERE 予約ステータス = '予約中'
INNER JOIN 予約申込 USING (予約ID)
-- 全状態の一覧参照
SELECT * FROM 予約
INNER JOIN 予約申込 ON 予約.予約ID = 予約申込.予約ID
LEFT JOIN 予約キャンセル ON 予約.予約ID = 予約キャンセル.予約ID
LEFT JOIN 予約取置き ON 予約.予約ID = 予約取置き.予約ID