# 実行計画とは
オプティマイザがSQLを実行する順序を確認するもの

クエリが遅い時に原因を特定するのに使える

実際にクエリを発行するのではなく統計情報から見積もる

```sql
-- クエリの先頭にEXPLAINをつけるだけ
EXPLAIN SELECT * FROM 蔵書 WHERE 書誌ID = 'ddfvs'
```

id: クエリの実行順序

select_type: SELECTの種類

table: アクセスするテーブル名

type: アクセス方法(const, ref, ALL等)

key: 使用されるインデックス名

rows:推定処理行数

Extra:補足情報

## 実行計画のアクセス方法(type)
1. const: プライマリキーまたはユニークキーによる等価検索
2. range: インデックスを使った範囲検索
3. index: インデックス全体をスキャン
4. ALL: テーブル全体をスキャン(最も遅い)

## 実践課題
図書館システムの「冊数ごとの蔵書数を取得するクエリ」が重いです。
ボトルネックを特定し、クエリを改善してください。
```sql
SELECT
    冊数
    (SELECT COUNT(*) FROM 書誌 b2
    WHERE (SELECT COUNT(*) FROM 蔵書
            WHERE 書誌ID = b2.書誌ID AND ステータス != '処分') = t.冊数) AS 書誌数
    FROM (
        SELECT DISTINCT
        (
            (SELECT COUNT(*) FROM 蔵書
            WHERE 書誌ID = 書誌.書誌ID AND ステータス != '処分') AS 冊数
            FROM 書誌
        ) 
    ) t
    ORDER BY 冊数;
```